import{E as J}from"./button-2bf0b725.js";import{_ as K,a as Q}from"./TElSelect-b2c5046b.js";import{d as W,r as n,c as X,o as Y,a as I,b as a,e as G,n as T,t as y,f as E,g as Z,F as ee,h as te,w as ae,u as le,i as se,p as ne,j as oe,k as C,l as ce}from"./index-c1a39fe6.js";const re="/Ford-flip/assets/ford_pon-9f42f11c.mp3",p=x=>(ne("data-v-99acc948"),x=x(),oe(),x),de={class:"flex flex-col relative min-h-100vh bg-[#f7f3e9] items-center overflow-hidden pb-24 xs:pb-32 hand-drawn-bg safari-padding"},ie=p(()=>a("h1",{class:"text-4xl sm:text-3xl xs:text-2xl my-5 text-[#34495e] hand-drawn-text"}," 《Ford來摸肚》 ",-1)),ue=p(()=>a("h2",{class:"text-3xl sm:text-2xl xs:text-xl my-4 text-[#e74c3c] hand-drawn-text"}," 選擇格子數量 ",-1)),ve={key:0,class:"block absolute top-1/3 flex flex-col items-center justify-center w-full px-4"},me=p(()=>a("h2",{class:"text-4xl sm:text-3xl xs:text-2xl font-bold text-[#34495e] mb-4 hand-drawn-text"}," 遊戲即將開始 ",-1)),fe={class:"countdown-timer font-bold text-[#e74c3c] hand-drawn-text"},pe=p(()=>a("p",{class:"text-xl sm:text-lg xs:text-base text-[#2980b9] mt-4 hand-drawn-text"}," 準備好了嗎？ ",-1)),xe={class:"mt-8 w-60 sm:w-48 xs:w-40 bg-[#ecf0f1] h-3 hand-drawn-border"},he={class:"text-sm text-[#7f8c8d] mt-2 hand-drawn-text"},ge={class:"text-2xl sm:text-xl xs:text-lg mb-6 sm:mb-4 text-center"},_e=p(()=>a("span",{class:"text-[#7f8c8d] hand-drawn-text"},"計時器:",-1)),we={class:"timer font-bold text-[#e67e22] hand-drawn-text"},be=["onClick"],Ie={class:"text-center mt-5 mb-20 xs:mb-16 sm:mb-12"},ye=se('<div class="team-info" data-v-99acc948><div class="team-info-content" data-v-99acc948><div class="team-member" data-v-99acc948><div class="team-role" data-v-99acc948>製作：</div><div class="team-name" data-v-99acc948>Ford 的右手 ✋</div></div><div class="team-member" data-v-99acc948><div class="team-role" data-v-99acc948>共同製作 &amp; 肚肚支援：</div><div class="team-name" data-v-99acc948>Eddie 🤲</div></div><div class="team-member" data-v-99acc948><div class="team-role" data-v-99acc948>照片提供 &amp; 摸肚 &amp; 撩妹總監：</div><div class="team-name" data-v-99acc948>Ford 😏</div></div></div></div>',1),Ce={class:"version-info"},Fe=W({__name:"FlipCardGame",setup(x){const M="0.1.17",N=new Audio(re);function j(e){let t=[3];return e>=12&&(t=[e/4]),t.sort(()=>Math.random()-.5),t.pop()||3}function A(e){const t="webp",l=["image1","image2","image3","image4","image5","image6"].map(s=>`/images/${s}.${t}`);return l.sort(()=>Math.random()-.5),l.slice(0,j(e))}function B(e){const t=A(e),l=e/t.length,s=t.join(",").concat(",").repeat(l).split(",");return s.pop(),s.sort(()=>Math.random()-.5),s}function L(e,t){return parseFloat((e+t).toFixed(2))}const i=n(""),h=n(!1),u=n(!1),v=n(3),o=n(null),g=n(!1),_=n(0),r=n([]),c=n([]),m=n([]),f=n(0),w=n(null),z=[{id:"1",label:"--選擇--",value:"",disabled:!0},{id:"2",label:"簡單",value:"6"},{id:"3",label:"中等",value:"12"},{id:"4",label:"困難",value:"20"}],F=X(()=>{const e=parseInt(i.value);return e===12?"middle":e===20?"hard":""});function D(e){return new Promise((t,l)=>{let s=0;const P=e.length;e.forEach(d=>{const b=new Image;b.onload=()=>{s++,_.value=Math.floor(s/P*100),s===P&&(g.value=!0,t())},b.onerror=l,b.src=`/Ford-flip/${d.replace(/^\//,"")}`})})}function O(e){i.value=e;const t=parseInt(i.value);t&&(h.value=!0,v.value=3,r.value=B(t),D(r.value).catch(l=>{console.error("圖片加載失敗:",l),alert("圖片加載失敗，請重新開始遊戲"),V()}),o.value=window.setInterval(()=>{v.value-=1,v.value<=0&&(clearInterval(o.value),o.value=null,U())},1e3))}function U(){if(g.value)u.value=!0,$();else{const e=setInterval(()=>{g.value&&(clearInterval(e),u.value=!0,$())},100)}}function V(){i.value="",h.value=!1,u.value=!1,v.value=3,g.value=!1,_.value=0,o.value!==null&&(clearInterval(o.value),o.value=null),S(),f.value=0,c.value=[],m.value=[],r.value=[]}function R(e){const t=c.value.length<2,l=!k(e),s=!m.value.includes(e);t&&l&&s&&c.value.push(e),c.value.length===2&&H()}function k(e){return c.value.includes(e)||m.value.includes(e)}function q(e){return k(e)?{backgroundImage:`url(/Ford-flip/${r.value[e].replace(/^\//,"")})`}:{}}function H(){const[e,t]=c.value;if(r.value[e]===r.value[t]){const l=()=>{m.value.push(...c.value),c.value=[],N.currentTime=0,N.play().catch(s=>{console.error("播放音效失敗:",s)})};m.value.length===r.value.length-2?(S(),setTimeout(()=>{l(),alert("恭喜！你已經匹配了所有卡片！")},70)):l()}else setTimeout(()=>{c.value=[]},300)}function $(){f.value=0,w.value=window.setInterval(()=>{f.value=L(f.value,.01)},10)}function S(){w.value!==null&&(clearInterval(w.value),w.value=null)}return Y(()=>{S(),o.value!==null&&(clearInterval(o.value),o.value=null)}),(e,t)=>{const l=K,s=J;return C(),I("div",de,[ie,a("div",{class:T(["block absolute top-1/5 transition-all duration-800 w-full px-4 text-center",{"transform -translate-x-200vw":h.value}])},[ue,G(l,{class:"mt-4 w-full max-w-xs mx-auto hand-drawn-select","model-value":i.value,name:"difficulty","input-class":"text-base",options:z,"onUpdate:modelValue":O},null,8,["model-value"])],2),h.value&&!u.value?(C(),I("div",ve,[me,a("div",fe,y(v.value),1),pe,a("div",xe,[a("div",{class:"bg-[#27ae60] h-3 transition-all duration-300",style:E({width:`${_.value}%`})},null,4)]),a("p",he," 圖片加載中... "+y(_.value)+"% ",1)])):Z("",!0),a("div",{class:"block absolute top-1/5 w-full px-2 sm:px-4 game-area",style:E({display:u.value?"block":"none"})},[a("div",ge,[_e,a("span",we,y(f.value.toFixed(2)),1)]),a("div",{class:T(["grid justify-items-center items-center mx-auto hand-drawn-grid",[F.value?"":"grid-cols-3 gap-2.5 sm:gap-2 xs:gap-1.5 w-full max-w-[28rem] mx-auto",F.value==="middle"?"grid-cols-4 gap-2 sm:gap-1.5 xs:gap-1 w-full max-w-[32rem] mx-auto":"",F.value==="hard"?"grid-cols-5 xs:grid-cols-4 gap-2 sm:gap-1.5 xs:gap-1 w-full max-w-[36rem] mx-auto":""]]),ref:"gameGrid"},[(C(!0),I(ee,null,te(r.value,(P,d)=>(C(),I("div",{key:d,class:T(["card-item bg-[#ecf0f1] text-2xl cursor-pointer bg-cover bg-center w-full h-full hand-drawn-card",{"bg-[#ecf0f1] !bg-none":!k(d)}]),style:E(q(d)),onClick:b=>R(d)},null,14,be))),128))],2),a("div",Ie,[G(s,{type:"success",class:"btn btn-lg xs:btn-md hand-drawn-button",onClick:V},{default:ae(()=>[ce(" 重置遊戲 ")]),_:1})])],4),ye,a("div",Ce,"v"+y(le(M)),1)])}}});const Te=Q(Fe,[["__scopeId","data-v-99acc948"]]);export{Te as default};
